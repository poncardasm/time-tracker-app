---
description: Time Tracker App - Project rules for React PWA with Vite and Tailwind CSS
globs: []
alwaysApply: true
---

# Time Tracker App - Agent Instructions

## Project Overview

This is a minimalist Progressive Web App (PWA) for time tracking built with React, Vite, and Tailwind CSS.

## Tech Stack

- **Build Tool**: Vite 6.x
- **Styling**: Tailwind CSS 4.1.x with CSS-first configuration
- **Frontend**: React (Functional Components with Hooks)
- **PWA**: Service Worker with network-first caching strategy
- **Storage**: Browser localStorage (no backend/server)

## Architecture Principles

### Code Organization

- **Entry Point**: `src/main.jsx` renders `src/App.jsx`
- **Components**: `src/components/` for UI components (e.g., `Header`, `TaskModal`, `HistoryList`)
- **Hooks**: `src/hooks/` for business logic (e.g., `useTimer`, `useTasks`, `useTheme`)
- **Utilities**: `src/utils.js` for helper functions
- **CSS**: Tailwind utilities imported in `src/main.css`

### Code Style

#### JavaScript/React

- Use ES6+ modules (`import`/`export`)
- Use functional components with Hooks (`useState`, `useEffect`, `useRef`, `useCallback`)
- Use `const` for variables, `let` only when reassignment is needed
- Use arrow functions for event handlers and effects
- Use descriptive variable names: `currentTask`, `timerInterval`, `taskModal`
- Use camelCase for variables and functions: `startTask()`, `updateTimerDisplay()`
- Use UPPER_SNAKE_CASE for constants: `STORAGE_KEY`
- Avoid direct DOM manipulation; use React state and refs
- Group related code with section comments if needed

#### HTML/CSS (JSX)

- Use `className` instead of `class`
- Use semantic HTML5 elements
- Prefer Tailwind utility classes over custom CSS
- Use Tailwind's dark mode classes: `dark:bg-slate-800`, `dark:text-white`
- Ensure all interactive elements have proper focus states
- Use transition classes for smooth animations: `transition-colors duration-300`

#### Naming Conventions

- Components: PascalCase (`TaskModal`, `HistoryList`)
- Hooks: camelCase prefixed with `use` (`useTimer`, `useTasks`)
- Props: camelCase (`isOpen`, `onClose`, `activeTask`)
- State variables: descriptive names (`currentTask`, `isModalOpen`)

## File Structure

```
time-tracker-app/
├── index.html              # Main HTML (root div)
├── src/
│   ├── main.jsx           # Entry Point
│   ├── App.jsx            # Main Application Shell
│   ├── main.css           # Tailwind imports
│   ├── utils.js           # Helper functions
│   ├── components/        # UI Components
│   │   ├── Header.jsx
│   │   ├── StartView.jsx
│   │   ├── ActiveView.jsx
│   │   ├── HistoryList.jsx
│   │   ├── TaskModal.jsx
│   │   └── DeleteModal.jsx
│   └── hooks/             # Custom Hooks
│       ├── useTasks.js
│       ├── useTimer.js
│       └── useTheme.js
├── public/
│   ├── sw.js              # Service Worker
│   ├── manifest.json      # PWA manifest
│   └── *.svg              # App icons
├── dist/                  # Build output (gitignored)
└── vite.config.js         # Vite configuration
```

## Development Guidelines

### Adding New Features

1.  **Component**: Create a new component in `src/components/` if needed
2.  **Logic**: Add business logic to existing hooks or create a new hook in `src/hooks/`
3.  **State**: Manage state within hooks or `App.jsx` (avoid global state if possible)
4.  **Persistence**: Use localStorage through `useTasks` hook
5.  **Integration**: Import and use the component/hook in `App.jsx`

### Styling Guidelines

-   **Primary color**: Indigo (`indigo-600`, `indigo-700`, etc.)
-   **Accent colors**:
    -   Success/Active: Green (`green-100`, `green-800`)
    -   Danger/Delete: Red (`red-500`, `red-600`)
-   **Dark mode**: Always provide dark mode variants using Tailwind's `dark:` prefix
-   **Spacing**: Use Tailwind's spacing scale (p-4, mb-6, space-x-3)
-   **Typography**: Use Tailwind's font utilities (`font-bold`, `text-sm`, `text-2xl`)
-   **Shadows**: Use `shadow-lg`, `shadow-xl`, `shadow-2xl` for depth
-   **Rounded corners**: Use `rounded-xl` or `rounded-2xl` for modern look
-   **Transitions**: Always include transitions for interactive elements

### PWA Considerations

-   **Service Worker**: Update `CACHE_NAME` version when making significant changes
-   **Manifest**: Keep `manifest.json` updated with app metadata
-   **Offline support**: Ensure core functionality works offline
-   **Icons**: Provide both 192x192 and 512x512 SVG icons
-   **Theme color**: Match `theme-color` meta tag to primary color

### State Management

-   Use custom hooks to encapsulate logic and state
-   Persist important state to localStorage (`useTasks`, `useTheme`)
-   Clear state appropriately when tasks end or are deleted
-   Handle edge cases (empty state, invalid data, etc.)

### Error Handling

-   Validate user input before processing
-   Provide user-friendly error messages (e.g., `alert` or toast)
-   Handle localStorage quota exceeded errors gracefully
-   Validate date/time inputs for manual entries

### Accessibility

-   Use semantic HTML elements (`<button>`, `<form>`, `<label>`)
-   Ensure all interactive elements are keyboard accessible
-   Provide proper ARIA labels when needed
-   Maintain focus management in modals
-   Use sufficient color contrast (Tailwind handles this)

### Performance

-   Debounce rapid UI updates if needed
-   Clear intervals/timeouts when components unmount (`useEffect` cleanup)
-   Minimize re-renders using `React.memo` or `useCallback` if necessary (optimization)
-   Use efficient localStorage operations

## Common Patterns

### Custom Hook Pattern

```javascript
export function useMyFeature() {
  const [state, setState] = useState(initialState);

  useEffect(() => {
    // Side effects
    return () => {
      // Cleanup
    };
  }, [dependencies]);

  const handler = () => {
    // Logic
  };

  return { state, handler };
}
```

### Component Pattern

```javascript
export function MyComponent({ prop1, onAction }) {
  return (
    <div className="class-name">
      <h1>{prop1}</h1>
      <button onClick={onAction}>Action</button>
    </div>
  );
}
```

### localStorage Pattern (in Hooks)

```javascript
const STORAGE_KEY = "timeTrackerData";

const [data, setData] = useState(() => {
  const stored = localStorage.getItem(STORAGE_KEY);
  return stored ? JSON.parse(stored) : initialData;
});

useEffect(() => {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}, [data]);
```

## What NOT to Do

-   ❌ Don't use `var` - use `const` or `let`
-   ❌ Don't use inline styles - use Tailwind classes
-   ❌ Don't hardcode colors - use Tailwind's color system
-   ❌ Don't forget dark mode variants
-   ❌ Don't skip transitions/animations for interactive elements
-   ❌ Don't store sensitive data in localStorage
-   ❌ Don't break offline functionality when adding features
-   ❌ Don't directly manipulate the DOM (use Refs if absolutely necessary)

## Testing Considerations

-   Test with localStorage cleared (empty state)
-   Test dark mode toggle
-   Test offline functionality
-   Test on mobile viewport sizes
-   Test with very long task names
-   Test date/time edge cases (past dates, future dates, invalid ranges)
-   Test CSV export with special characters

## Build & Deployment

-   Run `npm run build` to create production build
-   Output goes to `dist/` directory
-   Ensure service worker is properly configured for production
-   Test PWA installation on target devices
